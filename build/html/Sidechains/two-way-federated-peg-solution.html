

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>A breakdown of the two-way federated peg solution &mdash; Stratis Academy  documentation</title>
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Stratis Sidechains" href="sidechains-introduction.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Stratis Academy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Blockchain101/blockchain101-introduction.html">     Blockchain 101 Course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Wallets/wallet-introduction.html">     Wallets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FullNode/full-node-introduction.html">     Full Node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ICO/ico-introduction.html">     ICO Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SmartContracts/smart-contracts-introduction.html">     Smart Contracts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="sidechains-introduction.html">     Sidechains</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">A breakdown of the two-way federated peg solution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-creation-of-the-apex-sidechain">The creation of the APEX sidechain</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-role-of-a-federation">The role of a Federation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#federation-leaders">Federation leaders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#more-on-sidechain-deposits-and-withdrawals">More on sidechain deposits and withdrawals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#federated-gateways">Federated Gateways</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Stratis Academy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="sidechains-introduction.html">Stratis Sidechains</a> &raquo;</li>
        
      <li>A breakdown of the two-way federated peg solution</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Sidechains/two-way-federated-peg-solution.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="a-breakdown-of-the-two-way-federated-peg-solution">
<h1>A breakdown of the two-way federated peg solution<a class="headerlink" href="#a-breakdown-of-the-two-way-federated-peg-solution" title="Permalink to this headline">¶</a></h1>
<p>This chapter details specific mechanics of a Two-Way Peg sidechain solution from initial creation of the sidechain to mining the transactions made on it. It also details the roles of the users involved.</p>
<div class="section" id="the-creation-of-the-apex-sidechain">
<h2>The creation of the APEX sidechain<a class="headerlink" href="#the-creation-of-the-apex-sidechain" title="Permalink to this headline">¶</a></h2>
<p>The creation of APEX sidechain involved mining the genesis block and premine block, which are the first and second blocks on the sidechain repectively. The premine block contains the “premine” of 20 million APEX coins, which are issued by the federation when STRAT are deposited in the mainchain.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As this is the Alpha version of sidechains, you will use test STRAT and test APEX. In this document, they are referred to as TSTRAT and TAPEX. TAPEX are issued at the following rate: 1 TSTRAT = 1 TAPEX.</p>
</div>
<p>The following figure shows the creation of the TAPEX sidechain:</p>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/Sidechains1-Creation.png"><img alt="Sidechains Creation" class="align-center" src="../_images/Sidechains1-Creation.png" style="width: 793px;" /></a>
</div></blockquote>
<p>The role played by the federation and the signifcance of the P2SH addresses is discussed in the next section.</p>
</div>
<div class="section" id="the-role-of-a-federation">
<h2>The role of a Federation<a class="headerlink" href="#the-role-of-a-federation" title="Permalink to this headline">¶</a></h2>
<p>The role of a federation is to sign-off the deposits from the mainchain to the sidechain and withdrawals from the sidechain to the mainchain. To achieve this, Stratis Sidechains take advantage of an existing technology in the Stratis nodes: <a class="reference external" href="https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch07.asciidoc#p2sh-addresses">Pay-To-Script-Hash addresses</a>. P2SH addresses are a convenient way for a user to make payments to an organization that requires <a class="reference external" href="https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch07.asciidoc#multisignature">UTXOs with multisignature locking scripts</a>, and they are adaptable to federation requirements. Although spending payments sent to P2SH addresses requires multiple signaturies, not all the possible signaturies are usually required. For example, only 4 of 5 signaturies may be required to spend a payment. The deposits and withdrawals that the federation controls also require a predefined number of signatures from federation members.</p>
<p>When a TSTRAT deposit is made, the federation signs for the release of APEX on the sidechain. When a TSTRAT withdrawal is made, the federation signs for the release of TSTAT on the mainchain</p>
<p>To achieve this, the Stratis Sidechains solution employs two P2SH addresses:</p>
<ol class="arabic simple">
<li>The federation members supply private keys from their mainchain wallets and a mainchain P2SH address is created. TSTRAT deposits are sent to this P2SH  address and remain there until they are withdrawn. Withdrawal of STRAT from this P2SH address requires multisignature unlocking.</li>
<li>The federation members supply private keys from their sidechain wallets, and a sidechain P2SH address is created. The premine of the 20 million TAPEX coins is sent to this P2SH address, which is shown in the previous figure. TAPEX are the issued from this P2SH address, subject to multisignature unlocking, when Strat are deposited. When TSTRAT are withdrawn, TAPEX are returned to this address.</li>
</ol>
<p>Creation of the each P2SH address requires a public key from each federation member, which is shown in the previous figure. All supplied keys are hashed before they are used in the locking script. More information on this is available <a class="reference external" href="https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch07.asciidoc#pay-to-script-hash-p2sh">here</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As this is the Alpha version of sidechains, the federation controlling the APEX sidechain is made up of Stratis Platform team members. Future versions will enable users to become federation members themselves and create their own sidechains.</p>
</div>
</div>
<div class="section" id="federation-leaders">
<h2>Federation leaders<a class="headerlink" href="#federation-leaders" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="more-on-sidechain-deposits-and-withdrawals">
<h2>More on sidechain deposits and withdrawals<a class="headerlink" href="#more-on-sidechain-deposits-and-withdrawals" title="Permalink to this headline">¶</a></h2>
<div class="section" id="federated-gateways">
<h3>Federated Gateways<a class="headerlink" href="#federated-gateways" title="Permalink to this headline">¶</a></h3>
<p>Deposits and withdrawals are different from standard transactions because they require something to be done on the the other chain. Only certain nodes on both the mainchain or sidechain, which are known as federated gateways, react to deposits or withdrawals in a special way; other nodes just treat them as normal transactions. Deposits and withdrawals include an address for the transaction on the other chain. It kis this extra piece of information that these</p>
</div>
</div>
</div>


           </div>
           
          </div>
          
        </div>
      </div>
      <footer class="footer-container">
  <div class="footer-pagination">
    
      <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        
        
          <a href="sidechains-introduction.html" class="btn btn-neutral" title="Stratis Sidechains" accesskey="p" rel="prev"><span class="fa fa-arrow-left"></span> Previous</a>
        
      </div>
    
  </div>

  <div role="contentinfo" class="footer-copyright">
    <div class="footer-logo-copyright">
      <img src="../_static/img/footer-logo.png" alt="Stratis" class="footer-logo">
      <p>
          &copy; Copyright 2018, Stratis Platform.

      </p>
    </div>

    <div class="footer-links">
      <a class="footer-social-link" href="https://twitter.com/stratisplatform"><i class="fa fa-twitter" aria-hidden="true"></i></a>
      <a class="footer-social-link" href="https://github.com/stratisproject"><i class="fa fa-github-alt" aria-hidden="true"></i></a>
    </div>

    <div style="clear: both;"></div>
  </div> 

</footer>


      <div style="clear: both;"></div>
    </section>
    
  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>